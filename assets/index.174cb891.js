var y=Object.defineProperty;var g=(h,t,s)=>t in h?y(h,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[t]=s;var o=(h,t,s)=>(g(h,typeof t!="symbol"?t+"":t,s),s);import{a as d}from"./react.27c661f5.js";import{r as p}from"./react-dom.0308af26.js";import{a,R as P,j as x,c as u,H as S}from"./react-router-dom.b9cdabb6.js";import{L as R,N as w,T as E}from"./@toplo/components.b756dbce.js";import{T as _}from"./react-icons/tb.dad0135c.js";import{f as L,B as D}from"./@chakra-ui/react.5410f8ca.js";import"./@chakra-ui/icons.704ef93f.js";import"./react-icons/bs.44f7f15a.js";import"./react-icons.bb2e9bbc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();var m={},f=p.exports;m.createRoot=f.createRoot,m.hydrateRoot=f.hydrateRoot;class b{constructor({points:t,canvas:s,context:i,mode:e="DRAG_CENTER",strokeStyle:r,fillStyle:l}){o(this,"points");o(this,"xPts");o(this,"yPts0");o(this,"yPts1");o(this,"yPts2");o(this,"gamma");o(this,"dx");o(this,"dt");o(this,"l");o(this,"c");o(this,"context");o(this,"canvas");o(this,"isDragging");o(this,"mouseX");o(this,"mouseY");o(this,"mode");o(this,"strokeStyle");o(this,"fillStyle");this.points=t,this.xPts=[...Array(t).keys()].map((n,c)=>c/t),this.yPts0=this.xPts.map(()=>0),this.yPts1=structuredClone(this.yPts0),this.yPts2=structuredClone(this.yPts0),this.gamma=200,this.l=.002,this.dx=this.xPts[1]-this.xPts[0],this.c=1/100,this.dt=.2,this.canvas=s,this.context=i,this.isDragging=!1,this.mouseX=0,this.mouseY=0,this.mode=e,this.strokeStyle=r,this.fillStyle=l,addEventListener("mousemove",n=>{n.preventDefault(),this.mouseX=n.clientX,this.mouseY=n.clientY},{passive:!1}),addEventListener("touchmove",n=>{var v;n.preventDefault();const c=((v=n.touches)==null?void 0:v[0])||{};this.mouseX=c.clientX,this.mouseY=c.clientY},{passive:!1}),["mousedown","touchstart"].map(n=>{addEventListener(n,()=>{this.isDragging=!0})}),["mouseup","touchend"].map(n=>{addEventListener(n,()=>{this.isDragging=!1})}),addEventListener("resize",()=>this.setSize())}move(t){this.yPts2[0]=this.yPts1[0],this.yPts2[1]=this.yPts1[1],this.yPts2[this.points-2]=this.yPts1[this.points-2],this.yPts2[this.points-1]=this.yPts1[this.points-1];for(let s=2;s<this.yPts1.length-2;s++)this.yPts2[s]=this.update(s,this.yPts0,this.yPts1,this.c,this.gamma,this.l,this.dx,this.dt),t&&this.drawString(s);this.yPts0=structuredClone(this.yPts1),this.yPts1=structuredClone(this.yPts2)}update(t,s,i,e,r,l,n,c){return 1/(1/(e*c)**2+r/(2*c))*(1/n**2*(i[t+1]-2*i[t]+i[t-1])-1/(e*c)**2*(s[t]-2*i[t])+r/(2*c)*s[t]-(l/n**2)**2*(i[t-2]-4*i[t-1]+6*i[t]-4*i[t+1]+i[t+2]))}strng2cnv_coords(t,s){return{x_cnv:this.canvas.width*t,y_cnv:s*this.canvas.width+this.canvas.height/2}}cnv2strng_coords(t,s){return{x_str:t/this.canvas.width,y_str:(s-this.canvas.height/2)/this.canvas.width}}drawString(t){this.context.beginPath(),this.context.lineWidth=5,this.context.strokeStyle=this.strokeStyle;const{x_cnv:s,y_cnv:i}=this.strng2cnv_coords(this.xPts[t-1],this.yPts2[t-1]),{x_cnv:e,y_cnv:r}=this.strng2cnv_coords(this.xPts[t],this.yPts2[t]);this.context.moveTo(s,i),this.context.lineTo(e,r),this.context.stroke()}dragString(){const{x_str:t,y_str:s}=this.cnv2strng_coords(this.mouseX,this.mouseY);this.mode==="MOVE_LEFT_END"?this.yPts1[0]=this.yPts1[1]=s:this.mode==="DRAG_CENTER"&&(this.yPts1[Math.round(this.points*t)]=s)}setSize(){this.canvas.height=innerHeight/innerHeight*700,this.canvas.width=innerWidth}anim(){requestAnimationFrame(()=>this.anim()),this.context.fillStyle=this.fillStyle,this.context.fillRect(0,0,this.canvas.width,this.canvas.height);for(let t=5;t--;)this.move(t===0),this.isDragging&&this.dragString()}draw(){this.setSize(),this.anim()}}const T=()=>{const h=d.useRef(null),t=L("rgba(28, 28, 27)","rgba(0, 0, 0)");return d.useEffect(()=>{var i;const s=(i=h.current)==null?void 0:i.getContext("2d");h.current&&s&&new b({points:100,canvas:h.current,context:s,fillStyle:t,strokeStyle:"blue",mode:"DRAG_CENTER"}).draw()},[h.current,t]),a(D,{width:"100%",as:"canvas",ref:h,_hover:{cursor:"grab"}})},k=()=>a(P,{children:x(u,{path:"/",element:a(R,{}),children:[a(u,{index:!0,element:a(T,{})}),a(u,{path:"*",element:a(w,{})})]})});const C=m.createRoot(document.getElementById("root"));C.render(a(d.StrictMode,{children:a(S,{children:a(E,{routes:{"/":{name:"WaveSim",icon:_}},footer:{gitHubLink:"https://github.com/petarzarkov/wave-sim"},children:a(k,{})})})}));
